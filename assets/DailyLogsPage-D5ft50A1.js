import{r as u,j as e,H as ie,C as q,J as re,K as ce,D as de}from"./vendor-BUGsBopJ.js";import{t as oe,a as G,h as xe,i as me,g as pe,j as ue,W as he,u as je,T as C,k as B,l as be,m as K,n as ge,o as Q,p as ye,q as J,r as ve,s as U,v as Ne,w as fe,x as we,d as _e,y as ke,z as Ce,A as Se,B as qe}from"./index-BqeWEpsg.js";import{P as Z}from"./PriorityBadge-CPqtlQ4o.js";import{F as X,u as De,A as Te,z as Ae,W as Ee,k as Me,a as Pe,g as Fe,f as Ie,K as R,P as w,r as Le,X as $e}from"./icons-BH71IJCZ.js";import"./radix-DOd9NWOq.js";import"./tanstack-D2p4VxNq.js";import"./router-DTOaVcvx.js";import"./supabase-BqdusSG3.js";const c="lld-input w-full px-3 py-2 rounded-lg text-sm",d="block text-xs font-medium text-slate-400 mb-1",N="px-3 py-1.5 rounded-lg bg-amber-500 hover:bg-amber-400 text-slate-900 text-xs font-semibold transition-colors",_="px-3 py-1.5 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 text-xs font-medium transition-colors",We="p-1.5 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",Y="w-4 h-4 rounded border-slate-500 bg-slate-700 text-amber-500 focus:ring-amber-500",ss=({initialData:a})=>{var M,P,F,I,L,$,W,O,z;const[r,o]=u.useState(new Date),[p,t]=u.useState(oe()),[l,b]=u.useState([]),[h,s]=u.useState([]),[x,m]=u.useState(null),[n,y]=u.useState(null),[j,D]=u.useState("general"),[Ke,T]=u.useState(!1),A=u.useCallback(async()=>{T(!0);try{const i=await G({date:p});b(i),i.length>0&&!x&&m(i[0].id)}catch(i){console.error(i)}T(!1)},[p]),f=u.useCallback(async()=>{if(!x){y(null);return}try{const i=await xe(x);y(i)}catch(i){console.error(i)}},[x]),E=u.useCallback(async()=>{try{const i=await G();s(i.map(g=>g.log_date))}catch(i){console.error(i)}},[]);u.useEffect(()=>{A()},[p]),u.useEffect(()=>{f()},[x]),u.useEffect(()=>{E()},[]),u.useEffect(()=>{a!=null&&a.logId&&m(a.logId),a!=null&&a.tab&&D(a.tab)},[a]),u.useEffect(()=>{l.length>0&&!l.find(i=>i.id===x)&&m(l[0].id),l.length===0&&(m(null),y(null))},[l]);const ee=me(r.getFullYear(),r.getMonth()),se=async i=>{confirm("Delete this job entry?")&&(await ue(i),m(null),A(),E())},te=async(i,g)=>{if(n)try{await je(n.id,{[i]:g}),y(v=>v?{...v,[i]:g}:null)}catch(v){console.error(v)}},ae=[{key:"general",label:"General",icon:X},{key:"crew",label:"Crew",icon:De,count:(M=n==null?void 0:n.crew)==null?void 0:M.length},{key:"activities",label:"Activities",icon:Te,count:(P=n==null?void 0:n.activities)==null?void 0:P.length},{key:"materials",label:"Materials",icon:Ae,count:(F=n==null?void 0:n.materials)==null?void 0:F.length},{key:"equipment",label:"Equipment",icon:Ee,count:(I=n==null?void 0:n.equipment)==null?void 0:I.length},{key:"visitors",label:"Visitors",icon:Me,count:(L=n==null?void 0:n.visitors)==null?void 0:L.length}];return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 h-[calc(100vh-5rem)]",children:[e.jsxs("div",{className:"lg:hidden flex items-center gap-2 bg-slate-800/60 border border-slate-700/50 rounded-xl p-3",children:[e.jsx(Pe,{className:"w-4 h-4 text-amber-400"}),e.jsx("input",{type:"date",value:p,onChange:i=>{t(i.target.value),m(null)},className:"flex-1 px-3 py-1.5 rounded-lg bg-slate-700 border border-slate-600 text-white text-sm focus:outline-none focus:border-amber-500"}),e.jsxs("span",{className:"text-xs text-slate-400",children:[l.length," job",l.length!==1?"s":""]})]}),e.jsxs("div",{className:"hidden lg:block w-64 flex-shrink-0 bg-slate-800/60 border border-slate-700/50 rounded-xl p-3 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:()=>o(ie(r)),className:"p-1 rounded hover:bg-slate-700 text-slate-400",children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-sm font-semibold text-white",children:q(r,"MMMM yyyy")}),e.jsx("button",{onClick:()=>o(re(r,1)),className:"p-1 rounded hover:bg-slate-700 text-slate-400",children:e.jsx(Ie,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-0.5 text-center mb-1",children:["S","M","T","W","T","F","S"].map((i,g)=>e.jsx("div",{className:"text-[10px] text-slate-500 font-medium py-1",children:i},g))}),ee.map((i,g)=>e.jsx("div",{className:"grid grid-cols-7 gap-0.5",children:i.map((v,H)=>{if(!v)return e.jsx("div",{},H);const S=q(v,"yyyy-MM-dd"),V=S===p,le=ce(v,new Date),ne=h.includes(S);return e.jsxs("button",{onClick:()=>{t(S),m(null)},className:`relative w-full aspect-square flex items-center justify-center rounded-lg text-xs transition-colors ${V?"bg-amber-500 text-slate-900 font-bold":le?"bg-slate-700 text-white font-semibold":"text-slate-300 hover:bg-slate-700/50"}`,children:[v.getDate(),ne&&!V&&e.jsx("span",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-amber-400"})]},H)})},g)),e.jsxs("div",{className:"mt-4 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400 font-medium",children:q(de(p),"EEE, dd MMM")}),e.jsxs("span",{className:"text-[10px] text-slate-500",children:[l.length," job",l.length!==1?"s":""]})]}),l.map(i=>{var g,v;return e.jsxs("button",{onClick:()=>m(i.id),className:`w-full text-left p-2 rounded-lg text-xs transition-colors ${x===i.id?"bg-amber-500/15 border border-amber-500/30 text-amber-300":"bg-slate-700/30 border border-transparent text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${pe(i.priority)}`}),e.jsx("span",{className:"font-medium truncate",children:((g=i.project)==null?void 0:g.name)||"Unknown"})]}),((v=i.project)==null?void 0:v.job_number)&&e.jsxs("span",{className:"text-[10px] text-slate-500 ml-3",children:["#",i.project.job_number]})]},i.id)})]})]}),e.jsx("div",{className:"flex-1 min-w-0 overflow-y-auto",children:n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-slate-800/60 border border-slate-700/50 rounded-xl p-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs font-mono text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded",children:["#",(($=n.project)==null?void 0:$.job_number)||"â€”"]}),e.jsx(Z,{priority:n.priority})]}),e.jsx("h2",{className:"text-lg font-bold text-white mt-1",children:((W=n.project)==null?void 0:W.name)||"Unknown"}),e.jsxs("p",{className:"text-xs text-slate-400",children:[(O=n.project)==null?void 0:O.location," ",(z=n.project)!=null&&z.client?`â€¢ ${n.project.client}`:""]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>se(n.id),className:"p-2 rounded-lg hover:bg-red-500/20 text-red-400",children:e.jsx(R,{className:"w-4 h-4"})})})]}),e.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1",children:ae.map(i=>{const g=i.icon;return e.jsxs("button",{onClick:()=>D(i.key),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium whitespace-nowrap transition-colors ${j===i.key?"bg-amber-500/15 text-amber-400 border border-amber-500/30":"text-slate-400 hover:text-white hover:bg-slate-800 border border-transparent"}`,children:[e.jsx(g,{className:"w-3.5 h-3.5"}),i.label,i.count!==void 0&&i.count>0&&e.jsx("span",{className:"bg-slate-700 text-slate-300 px-1.5 py-0.5 rounded-full text-[10px]",children:i.count})]},i.key)})}),e.jsxs("div",{className:"bg-slate-800/60 border border-slate-700/50 rounded-xl p-4",children:[j==="general"&&e.jsx(Oe,{log:n,onUpdate:te}),j==="crew"&&e.jsx(ze,{log:n,onRefresh:f}),j==="activities"&&e.jsx(He,{log:n,onRefresh:f}),j==="materials"&&e.jsx(Ve,{log:n,onRefresh:f}),j==="equipment"&&e.jsx(Ge,{log:n,onRefresh:f}),j==="visitors"&&e.jsx(Be,{log:n,onRefresh:f})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(X,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Select a job from the calendar or create a new one"})]})})})]})},Oe=({log:a,onUpdate:r})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Weather"}),e.jsxs("select",{value:a.weather||"",onChange:o=>r("weather",o.target.value),className:c,children:[e.jsx("option",{value:"",children:"Select..."}),he.map(o=>e.jsx("option",{value:o,children:o},o))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Temperature"}),e.jsx("input",{value:a.temperature||"",onChange:o=>r("temperature",o.target.value),className:c,placeholder:"e.g. 18Â°C"})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Wind"}),e.jsx("input",{value:a.wind||"",onChange:o=>r("wind",o.target.value),className:c,placeholder:"e.g. Light NW"})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Priority"}),e.jsxs("select",{value:a.priority,onChange:o=>r("priority",o.target.value),className:c,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:d,children:"Site Conditions"}),e.jsx("input",{value:a.site_conditions||"",onChange:o=>r("site_conditions",o.target.value),className:c,placeholder:"e.g. Dry, good access"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:d,children:"Safety Incidents"}),e.jsx("textarea",{value:a.safety_incidents||"",onChange:o=>r("safety_incidents",o.target.value),rows:2,className:`${c} resize-none`,placeholder:"Record any safety incidents..."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:d,children:"Critical Items"}),e.jsx("textarea",{value:a.critical_items||"",onChange:o=>r("critical_items",o.target.value),rows:2,className:`${c} resize-none`,placeholder:"Flag any critical issues..."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:d,children:"Notes"}),e.jsx("textarea",{value:a.notes||"",onChange:o=>r("notes",o.target.value),rows:3,className:`${c} resize-none`,placeholder:"General notes for the day..."})]})]});function k({item:a,fields:r,onSave:o,onDelete:p,onToggleComplete:t}){const[l,b]=u.useState(!1),[h,s]=u.useState({...a}),x=()=>{const n={};r.forEach(y=>{h[y.key]!==a[y.key]&&(n[y.key]=h[y.key])}),Object.keys(n).length>0&&o(a.id,n),b(!1)},m=_e(a.due_date||a.required_date);return e.jsxs("tr",{className:`border-b border-slate-700/30 ${a.is_completed?"opacity-50":""}`,children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx("input",{type:"checkbox",checked:a.is_completed,onChange:n=>t(a.id,n.target.checked),className:Y})}),r.map(n=>{var y;return e.jsx("td",{className:"py-2 px-2",children:l?n.type==="select"?e.jsxs("select",{value:h[n.key]||"",onChange:j=>s({...h,[n.key]:j.target.value}),className:"w-full px-2 py-1 rounded bg-slate-600 border border-slate-500 text-white text-xs",children:[e.jsx("option",{value:"",children:"â€”"}),(y=n.options)==null?void 0:y.map(j=>e.jsx("option",{value:j,children:j},j))]}):n.type==="checkbox"?e.jsx("input",{type:"checkbox",checked:h[n.key]||!1,onChange:j=>s({...h,[n.key]:j.target.checked}),className:Y}):e.jsx("input",{type:n.type,value:h[n.key]||"",onChange:j=>s({...h,[n.key]:n.type==="number"?Number(j.target.value):j.target.value}),className:"w-full px-2 py-1 rounded bg-slate-600 border border-slate-500 text-white text-xs"}):e.jsx("span",{className:`text-xs ${a.is_completed?"line-through text-slate-500":"text-slate-300"}`,children:a[n.key]||"â€”"})},n.key)}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Z,{priority:m,size:"sm",showIcon:!1})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("div",{className:"flex gap-1",children:l?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:x,className:"p-1 rounded hover:bg-emerald-500/20 text-emerald-400",children:e.jsx(Le,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>{b(!1),s({...a})},className:"p-1 rounded hover:bg-slate-600 text-slate-400",children:e.jsx($e,{className:"w-3.5 h-3.5"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>b(!0),className:"p-1 rounded hover:bg-slate-600 text-slate-400 text-xs",children:"Edit"}),e.jsx("button",{onClick:()=>p(a.id),className:We,children:e.jsx(R,{className:"w-3.5 h-3.5"})})]})})})]})}const ze=({log:a,onRefresh:r})=>{const[o,p]=u.useState(!1),[t,l]=u.useState({worker_name:"",trade:"",start_time:"07:00",finish_time:"16:30",lunch_minutes:30,due_date:"",notes:""}),b=async()=>{const s=fe(t.start_time,t.finish_time,t.lunch_minutes);await we({...t,daily_log_id:a.id,hours_worked:s,is_completed:!1}),l({worker_name:"",trade:"",start_time:"07:00",finish_time:"16:30",lunch_minutes:30,due_date:"",notes:""}),p(!1),r()},h=[{key:"worker_name",label:"Name",type:"text"},{key:"trade",label:"Trade",type:"select",options:C},{key:"start_time",label:"Start",type:"time"},{key:"finish_time",label:"Finish",type:"time"},{key:"due_date",label:"Due Date",type:"date"},{key:"notes",label:"Notes",type:"text"}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Crew Attendance"}),e.jsxs("button",{onClick:()=>p(!o),className:N,children:[e.jsx(w,{className:"w-3 h-3 inline mr-1"}),"Add"]})]}),o&&e.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3 mb-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Name *"}),e.jsx("input",{value:t.worker_name,onChange:s=>l({...t,worker_name:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Trade"}),e.jsxs("select",{value:t.trade,onChange:s=>l({...t,trade:s.target.value}),className:c,children:[e.jsx("option",{value:"",children:"â€”"}),C.map(s=>e.jsx("option",{children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Start"}),e.jsx("input",{type:"time",value:t.start_time,onChange:s=>l({...t,start_time:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Finish"}),e.jsx("input",{type:"time",value:t.finish_time,onChange:s=>l({...t,finish_time:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Due Date"}),e.jsx("input",{type:"date",value:t.due_date,onChange:s=>l({...t,due_date:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Notes"}),e.jsx("input",{value:t.notes,onChange:s=>l({...t,notes:s.target.value}),className:c})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:b,className:N,children:"Save"}),e.jsx("button",{onClick:()=>p(!1),className:_,children:"Cancel"})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 w-8"}),h.map(s=>e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 uppercase",children:s.label},s.key)),e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500",children:"Priority"}),e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 w-20"})]})}),e.jsx("tbody",{children:(a.crew||[]).map(s=>e.jsx(k,{item:s,fields:h,onSave:async(x,m)=>{await B(x,m),r()},onDelete:async x=>{await be(x),r()},onToggleComplete:async(x,m)=>{await B(x,{is_completed:m}),r()}},s.id))})]}),(!a.crew||a.crew.length===0)&&e.jsx("p",{className:"text-xs text-slate-500 text-center py-4",children:"No crew recorded. Click Add to start."})]})]})},He=({log:a,onRefresh:r})=>{const[o,p]=u.useState(!1),[t,l]=u.useState({description:"",location:"",trade:"",progress_pct:0,due_date:"",notes:""}),b=async()=>{await ke({...t,daily_log_id:a.id,is_completed:!1}),l({description:"",location:"",trade:"",progress_pct:0,due_date:"",notes:""}),p(!1),r()},h=[{key:"description",label:"Description",type:"text"},{key:"location",label:"Location",type:"text"},{key:"trade",label:"Trade",type:"select",options:C},{key:"progress_pct",label:"Progress %",type:"number"},{key:"due_date",label:"Due Date",type:"date"},{key:"notes",label:"Notes",type:"text"}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Work Activities"}),e.jsxs("button",{onClick:()=>p(!o),className:N,children:[e.jsx(w,{className:"w-3 h-3 inline mr-1"}),"Add"]})]}),o&&e.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3 mb-3 grid grid-cols-2 md:grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Description *"}),e.jsx("input",{value:t.description,onChange:s=>l({...t,description:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Location"}),e.jsx("input",{value:t.location,onChange:s=>l({...t,location:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Trade"}),e.jsxs("select",{value:t.trade,onChange:s=>l({...t,trade:s.target.value}),className:c,children:[e.jsx("option",{value:"",children:"â€”"}),C.map(s=>e.jsx("option",{children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Progress %"}),e.jsx("input",{type:"number",min:0,max:100,value:t.progress_pct,onChange:s=>l({...t,progress_pct:Number(s.target.value)}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Due Date"}),e.jsx("input",{type:"date",value:t.due_date,onChange:s=>l({...t,due_date:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Notes"}),e.jsx("input",{value:t.notes,onChange:s=>l({...t,notes:s.target.value}),className:c})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:b,className:N,children:"Save"}),e.jsx("button",{onClick:()=>p(!1),className:_,children:"Cancel"})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 w-8"}),h.map(s=>e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 uppercase",children:s.label},s.key)),e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500",children:"Priority"}),e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 w-20"})]})}),e.jsx("tbody",{children:(a.activities||[]).map(s=>e.jsx(k,{item:s,fields:h,onSave:async(x,m)=>{await K(x,m),r()},onDelete:async x=>{await ge(x),r()},onToggleComplete:async(x,m)=>{await K(x,{is_completed:m}),r()}},s.id))})]}),(!a.activities||a.activities.length===0)&&e.jsx("p",{className:"text-xs text-slate-500 text-center py-4",children:"No activities recorded. Click Add to start."})]})]})},Ve=({log:a,onRefresh:r})=>{const[o,p]=u.useState(!1),[t,l]=u.useState({description:"",quantity:"",unit:"",supplier:"",required_date:"",status:"pending",notes:""}),b=async()=>{await Ce({...t,daily_log_id:a.id,is_completed:!1}),l({description:"",quantity:"",unit:"",supplier:"",required_date:"",status:"pending",notes:""}),p(!1),r()},h=[{key:"description",label:"Description",type:"text"},{key:"quantity",label:"Qty",type:"text"},{key:"unit",label:"Unit",type:"text"},{key:"supplier",label:"Supplier",type:"text"},{key:"required_date",label:"Required Date",type:"date"},{key:"status",label:"Status",type:"select",options:["pending","ordered","in-transit","delivered"]},{key:"notes",label:"Notes",type:"text"}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Materials"}),e.jsxs("button",{onClick:()=>p(!o),className:N,children:[e.jsx(w,{className:"w-3 h-3 inline mr-1"}),"Add"]})]}),o&&e.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3 mb-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Description *"}),e.jsx("input",{value:t.description,onChange:s=>l({...t,description:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Quantity"}),e.jsx("input",{value:t.quantity,onChange:s=>l({...t,quantity:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Unit"}),e.jsx("input",{value:t.unit,onChange:s=>l({...t,unit:s.target.value}),className:c,placeholder:"e.g. mÂ², sheets"})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Supplier"}),e.jsx("input",{value:t.supplier,onChange:s=>l({...t,supplier:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Required Date"}),e.jsx("input",{type:"date",value:t.required_date,onChange:s=>l({...t,required_date:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Status"}),e.jsxs("select",{value:t.status,onChange:s=>l({...t,status:s.target.value}),className:c,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"ordered",children:"Ordered"}),e.jsx("option",{value:"in-transit",children:"In Transit"}),e.jsx("option",{value:"delivered",children:"Delivered"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Notes"}),e.jsx("input",{value:t.notes,onChange:s=>l({...t,notes:s.target.value}),className:c})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:b,className:N,children:"Save"}),e.jsx("button",{onClick:()=>p(!1),className:_,children:"Cancel"})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 w-8"}),h.map(s=>e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 uppercase",children:s.label},s.key)),e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500",children:"Priority"}),e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 w-20"})]})}),e.jsx("tbody",{children:(a.materials||[]).map(s=>e.jsx(k,{item:s,fields:h,onSave:async(x,m)=>{await Q(x,m),r()},onDelete:async x=>{await ye(x),r()},onToggleComplete:async(x,m)=>{await Q(x,{is_completed:m}),r()}},s.id))})]}),(!a.materials||a.materials.length===0)&&e.jsx("p",{className:"text-xs text-slate-500 text-center py-4",children:"No materials recorded. Click Add to start."})]})]})},Ge=({log:a,onRefresh:r})=>{const[o,p]=u.useState(!1),[t,l]=u.useState({equipment_name:"",equipment_type:"",hours_used:0,condition:"good",due_date:"",notes:""}),b=async()=>{await Se({...t,daily_log_id:a.id,is_completed:!1}),l({equipment_name:"",equipment_type:"",hours_used:0,condition:"good",due_date:"",notes:""}),p(!1),r()},h=[{key:"equipment_name",label:"Equipment",type:"text"},{key:"equipment_type",label:"Type",type:"text"},{key:"hours_used",label:"Hours",type:"number"},{key:"condition",label:"Condition",type:"select",options:["good","fair","poor","needs-repair"]},{key:"due_date",label:"Due Date",type:"date"},{key:"notes",label:"Notes",type:"text"}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Equipment"}),e.jsxs("button",{onClick:()=>p(!o),className:N,children:[e.jsx(w,{className:"w-3 h-3 inline mr-1"}),"Add"]})]}),o&&e.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3 mb-3 grid grid-cols-2 md:grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Equipment *"}),e.jsx("input",{value:t.equipment_name,onChange:s=>l({...t,equipment_name:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Type"}),e.jsx("input",{value:t.equipment_type,onChange:s=>l({...t,equipment_type:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Hours Used"}),e.jsx("input",{type:"number",value:t.hours_used,onChange:s=>l({...t,hours_used:Number(s.target.value)}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Condition"}),e.jsxs("select",{value:t.condition,onChange:s=>l({...t,condition:s.target.value}),className:c,children:[e.jsx("option",{value:"good",children:"Good"}),e.jsx("option",{value:"fair",children:"Fair"}),e.jsx("option",{value:"poor",children:"Poor"}),e.jsx("option",{value:"needs-repair",children:"Needs Repair"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Due Date"}),e.jsx("input",{type:"date",value:t.due_date,onChange:s=>l({...t,due_date:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Notes"}),e.jsx("input",{value:t.notes,onChange:s=>l({...t,notes:s.target.value}),className:c})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:b,className:N,children:"Save"}),e.jsx("button",{onClick:()=>p(!1),className:_,children:"Cancel"})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 w-8"}),h.map(s=>e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 uppercase",children:s.label},s.key)),e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500",children:"Priority"}),e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 w-20"})]})}),e.jsx("tbody",{children:(a.equipment||[]).map(s=>e.jsx(k,{item:s,fields:h,onSave:async(x,m)=>{await J(x,m),r()},onDelete:async x=>{await ve(x),r()},onToggleComplete:async(x,m)=>{await J(x,{is_completed:m}),r()}},s.id))})]}),(!a.equipment||a.equipment.length===0)&&e.jsx("p",{className:"text-xs text-slate-500 text-center py-4",children:"No equipment recorded. Click Add to start."})]})]})},Be=({log:a,onRefresh:r})=>{const[o,p]=u.useState(!1),[t,l]=u.useState({visitor_name:"",company:"",purpose:"",time_in:"",time_out:"",due_date:"",notes:""}),b=async()=>{await qe({...t,daily_log_id:a.id,is_completed:!1}),l({visitor_name:"",company:"",purpose:"",time_in:"",time_out:"",due_date:"",notes:""}),p(!1),r()},h=[{key:"visitor_name",label:"Name",type:"text"},{key:"company",label:"Company",type:"text"},{key:"purpose",label:"Purpose",type:"text"},{key:"time_in",label:"Time In",type:"time"},{key:"time_out",label:"Time Out",type:"time"},{key:"due_date",label:"Due Date",type:"date"},{key:"notes",label:"Notes",type:"text"}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Visitors"}),e.jsxs("button",{onClick:()=>p(!o),className:N,children:[e.jsx(w,{className:"w-3 h-3 inline mr-1"}),"Add"]})]}),o&&e.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3 mb-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Name *"}),e.jsx("input",{value:t.visitor_name,onChange:s=>l({...t,visitor_name:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Company"}),e.jsx("input",{value:t.company,onChange:s=>l({...t,company:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Purpose"}),e.jsx("input",{value:t.purpose,onChange:s=>l({...t,purpose:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Time In"}),e.jsx("input",{type:"time",value:t.time_in,onChange:s=>l({...t,time_in:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Time Out"}),e.jsx("input",{type:"time",value:t.time_out,onChange:s=>l({...t,time_out:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Due Date"}),e.jsx("input",{type:"date",value:t.due_date,onChange:s=>l({...t,due_date:s.target.value}),className:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:d,children:"Notes"}),e.jsx("input",{value:t.notes,onChange:s=>l({...t,notes:s.target.value}),className:c})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:b,className:N,children:"Save"}),e.jsx("button",{onClick:()=>p(!1),className:_,children:"Cancel"})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 w-8"}),h.map(s=>e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 uppercase",children:s.label},s.key)),e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500",children:"Priority"}),e.jsx("th",{className:"py-2 px-2 text-[10px] text-slate-500 w-20"})]})}),e.jsx("tbody",{children:(a.visitors||[]).map(s=>e.jsx(k,{item:s,fields:h,onSave:async(x,m)=>{await U(x,m),r()},onDelete:async x=>{await Ne(x),r()},onToggleComplete:async(x,m)=>{await U(x,{is_completed:m}),r()}},s.id))})]}),(!a.visitors||a.visitors.length===0)&&e.jsx("p",{className:"text-xs text-slate-500 text-center py-4",children:"No visitors recorded. Click Add to start."})]})]})};export{ss as default};
