const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardPage-K6KCfXUp.js","assets/vendor-D3N_7ZIj.js","assets/PriorityBadge-E7mJChxy.js","assets/icons-DyizTpce.js","assets/radix-Bd5n9xZJ.js","assets/tanstack-DNTBUgdz.js","assets/router-CGYmyBNS.js","assets/supabase-YYfcpErp.js","assets/DailyLogsPage-Bn7TJhCI.js","assets/CalendarPage-Mjc3PNYl.js","assets/TimesheetPage-CdhXq0p2.js","assets/ReportsPage-D9DKT_-j.js"])))=>i.map(i=>d[i]);
import{r as l,y as ot,z as nt,j as e,B as it,$ as lt,C as Ie,D as Le,E as dt,F as ct,G as ut}from"./vendor-D3N_7ZIj.js";import{V as Re,R as Oe,A as Me,C as qe,T as $e,D as Be,P as mt,a as Ue,b as gt}from"./radix-Bd5n9xZJ.js";import{X as ie,S as ft,M as pt,L as xt,C as ht,a as bt,b as We,c as ze,d as ge,P as yt,e as ee,f as jt,g as vt,H as ae,h as oe,i as wt,j as be,E as ye,k as je,l as ve,U as V,m as le,n as Nt,o as Ct,p as St,q as _t,r as we,s as Ne,B as kt,t as Ft,u as Pt,v as Tt,F as Et,R as At,w as Dt,x as It}from"./icons-DyizTpce.js";import{Q as Lt,a as Rt}from"./tanstack-DNTBUgdz.js";import{u as Ot,B as Mt,R as qt,a as K,N as $t}from"./router-CGYmyBNS.js";import{c as Bt}from"./supabase-YYfcpErp.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const Ut="modulepreload",Wt=function(t){return"/LongLineDiaryV2/"+t},Ce={},U=function(s,r,a){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),d=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(r.map(u=>{if(u=Wt(u),u in Ce)return;Ce[u]=!0;const g=u.endsWith(".css"),x=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${x}`))return;const m=document.createElement("link");if(m.rel=g?"stylesheet":Ut,g||(m.as="script"),m.crossOrigin="",m.href=u,d&&m.setAttribute("nonce",d),document.head.appendChild(m),g)return new Promise((b,C)=>{m.addEventListener("load",b),m.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=o,window.dispatchEvent(d),!d.defaultPrevented)throw o}return n.then(o=>{for(const d of o||[])d.status==="rejected"&&i(d.reason);return s().catch(i)})};function zt(t={}){const{immediate:s=!1,onNeedRefresh:r,onOfflineReady:a,onRegistered:n,onRegisteredSW:i,onRegisterError:o}=t;let d,u;const g=async(m=!0)=>{await u};async function x(){if("serviceWorker"in navigator){if(d=await U(async()=>{const{Workbox:m}=await import("./vendor-D3N_7ZIj.js").then(b=>b.N);return{Workbox:m}},[]).then(({Workbox:m})=>new m("/LongLineDiaryV2/sw.js",{scope:"/LongLineDiaryV2/",type:"classic"})).catch(m=>{o==null||o(m)}),!d)return;d.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),d.addEventListener("installed",m=>{m.isUpdate||a==null||a()}),d.register({immediate:s}).then(m=>{i?i("/LongLineDiaryV2/sw.js",m):n==null||n(m)}).catch(m=>{o==null||o(m)})}}return u=x(),g}const Gt=1,Vt=1e6;let ce=0;function Ht(){return ce=(ce+1)%Number.MAX_SAFE_INTEGER,ce.toString()}const ue=new Map,Se=t=>{if(ue.has(t))return;const s=setTimeout(()=>{ue.delete(t),Y({type:"REMOVE_TOAST",toastId:t})},Vt);ue.set(t,s)},Jt=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,Gt)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?Se(r):t.toasts.forEach(a=>{Se(a.id)}),{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},te=[];let se={toasts:[]};function Y(t){se=Jt(se,t),te.forEach(s=>{s(se)})}function Yt({...t}){const s=Ht(),r=n=>Y({type:"UPDATE_TOAST",toast:{...n,id:s}}),a=()=>Y({type:"DISMISS_TOAST",toastId:s});return Y({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:n=>{n||a()}}}),{id:s,dismiss:a,update:r}}function Zt(){const[t,s]=l.useState(se);return l.useEffect(()=>(te.push(s),()=>{const r=te.indexOf(s);r>-1&&te.splice(r,1)}),[t]),{...t,toast:Yt,dismiss:r=>Y({type:"DISMISS_TOAST",toastId:r})}}function W(...t){return ot(nt(t))}const Qt=mt,Ge=l.forwardRef(({className:t,...s},r)=>e.jsx(Re,{ref:r,className:W("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));Ge.displayName=Re.displayName;const Xt=it("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ve=l.forwardRef(({className:t,variant:s,...r},a)=>e.jsx(Oe,{ref:a,className:W(Xt({variant:s}),t),...r}));Ve.displayName=Oe.displayName;const Kt=l.forwardRef(({className:t,...s},r)=>e.jsx(Me,{ref:r,className:W("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));Kt.displayName=Me.displayName;const He=l.forwardRef(({className:t,...s},r)=>e.jsx(qe,{ref:r,className:W("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(ie,{className:"h-4 w-4"})}));He.displayName=qe.displayName;const Je=l.forwardRef(({className:t,...s},r)=>e.jsx($e,{ref:r,className:W("text-sm font-semibold",t),...s}));Je.displayName=$e.displayName;const Ye=l.forwardRef(({className:t,...s},r)=>e.jsx(Be,{ref:r,className:W("text-sm opacity-90",t),...s}));Ye.displayName=Be.displayName;function es(){const{toasts:t}=Zt();return e.jsxs(Qt,{children:[t.map(function({id:s,title:r,description:a,action:n,...i}){return e.jsxs(Ve,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(Je,{children:r}),a&&e.jsx(Ye,{children:a})]}),n,e.jsx(He,{})]},s)}),e.jsx(Ge,{})]})}const Ze=l.createContext(null);function ts({children:t,defaultTheme:s="system",value:r,...a}){const[n,i]=l.useState(()=>{if(typeof window<"u"){const d=localStorage.getItem("theme");return d&&(d==="dark"||d==="light"||d==="system")?d:s}return s});l.useEffect(()=>{const d=window.document.documentElement;if(d.classList.remove("light","dark"),n==="system"){const u=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";d.classList.add(u);return}d.classList.add(n)},[n]);const o={theme:n,setTheme:d=>{localStorage.setItem("theme",d),i(d)}};return e.jsx(Ze.Provider,{value:o,...a,children:t})}const ss=()=>{const t=l.useContext(Ze);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},rs=({...t})=>{const{theme:s}=ss();return e.jsx(lt,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},as=gt,os=l.forwardRef(({className:t,sideOffset:s=4,...r},a)=>e.jsx(Ue,{ref:a,sideOffset:s,className:W("z-50 overflow-hidden rounded-md border border-border/40 bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-lg animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));os.displayName=Ue.displayName;const ns="https://ubksjxlfjdeqzpfgiogb.databasepad.com",is="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjAzZjAwZDdjLTkwMGQtNGUxOC1hN2QwLWJiZDNhZjdmYjViMCJ9.eyJwcm9qZWN0SWQiOiJ1YmtzanhsZmpkZXF6cGZnaW9nYiIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNzcxMzk5ODU1LCJleHAiOjIwODY3NTk4NTUsImlzcyI6ImZhbW91cy5kYXRhYmFzZXBhZCIsImF1ZCI6ImZhbW91cy5jbGllbnRzIn0.lQ5leJRhas9OqWFb5HKBX8reGnGyN2FC8aKAooMBMe4",f=Bt(ns,is),Qe=l.createContext({user:null,session:null,profile:null,loading:!0,signUp:async()=>({error:null}),signIn:async()=>({error:null}),signOut:async()=>{},updateProfile:async()=>({error:null})}),pe=()=>l.useContext(Qe),ls=({children:t})=>{const[s,r]=l.useState(null),[a,n]=l.useState(null),[i,o]=l.useState(null),[d,u]=l.useState(!0),g=l.useCallback(async h=>{try{const{data:y,error:p}=await f.from("profiles").select("*").eq("user_id",h).single();return p?(console.error("Profile fetch error:",p),null):y}catch(y){return console.error("Profile fetch exception:",y),null}},[]),x=l.useCallback(async h=>{const y=await g(h.id);if(y)return y;const p=h.user_metadata??{},w={user_id:h.id,full_name:p.full_name??"",role:p.role??"foreman"};try{const{error:_}=await f.from("profiles").insert(w);return _?(console.error("Profile insert error:",_),null):await g(h.id)}catch(_){return console.error("Profile insert exception:",_),null}},[g]);l.useEffect(()=>{(async()=>{try{const{data:{session:p}}=await f.auth.getSession();if(n(p),r((p==null?void 0:p.user)??null),p!=null&&p.user){const w=await x(p.user);o(w)}}catch(p){console.error("Auth init error:",p)}u(!1)})();const{data:{subscription:y}}=f.auth.onAuthStateChange(async(p,w)=>{if(n(w),r((w==null?void 0:w.user)??null),w!=null&&w.user)if(p==="SIGNED_IN")setTimeout(async()=>{const _=await x(w.user);o(_)},500);else{const _=await x(w.user);o(_)}else{o(null);try{localStorage.removeItem("sc_timesheet")}catch{}}});return()=>{y.unsubscribe()}},[g]);const m=async(h,y,p,w)=>{try{const{error:_}=await f.auth.signUp({email:h,password:y,options:{data:{full_name:p,role:w}}});return _?{error:_.message}:{error:null}}catch(_){return{error:_.message||"Sign up failed"}}},b=async(h,y)=>{try{const{error:p}=await f.auth.signInWithPassword({email:h,password:y});return p?{error:p.message}:{error:null}}catch(p){return{error:p.message||"Sign in failed"}}},C=async()=>{await f.auth.signOut(),r(null),n(null),o(null)},P=async h=>{if(!s)return{error:"Not authenticated"};try{const{error:y}=await f.from("profiles").update({...h,updated_at:new Date().toISOString()}).eq("user_id",s.id);if(y)return{error:y.message};const p=await g(s.id);return o(p),{error:null}}catch(y){return{error:y.message||"Update failed"}}};return e.jsx(Qe.Provider,{value:{user:s,session:a,profile:i,loading:d,signUp:m,signIn:b,signOut:C,updateProfile:P},children:t})},ds={sidebarOpen:!1,toggleSidebar:()=>{}},cs=l.createContext(ds),us=({children:t})=>{const[s,r]=l.useState(!1),a=()=>{r(n=>!n)};return e.jsx(cs.Provider,{value:{sidebarOpen:s,toggleSidebar:a},children:t})};function ne(t){const s=t.replace("#","").trim(),r=s.length===3?s.split("").map(o=>o+o).join(""):s,a=parseInt(r.slice(0,2),16),n=parseInt(r.slice(2,4),16),i=parseInt(r.slice(4,6),16);return{r:a,g:n,b:i}}function ms(t,s,r){const a=t/255,n=s/255,i=r/255,o=Math.max(a,n,i),d=Math.min(a,n,i);let u=0;const g=(o+d)/2,x=o-d;let m=0;if(x!==0){switch(m=x/(1-Math.abs(2*g-1)),o){case a:u=(n-i)/x%6;break;case n:u=(i-a)/x+2;break;case i:u=(a-n)/x+4;break}u*=60,u<0&&(u+=360)}const b=Math.round(u),C=Math.round(m*1e3)/10,P=Math.round(g*1e3)/10;return`${b} ${C}% ${P}%`}function S(t){const{r:s,g:r,b:a}=ne(t);return ms(s,r,a)}function J(t){const{r:s,g:r,b:a}=ne(t),n=[s,r,a].map(i=>{const o=i/255;return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]}function re(t){return J(t)<.45}function Xe(t){return Math.min(1,Math.max(0,t))}function A(t,s,r){const a=ne(t),n=ne(s),i=Xe(r),o=Math.round(a.r+(n.r-a.r)*i),d=Math.round(a.g+(n.g-a.g)*i),u=Math.round(a.b+(n.b-a.b)*i);return`#${[o,d,u].map(g=>g.toString(16).padStart(2,"0")).join("")}`.toUpperCase()}function B(t){return re(t)?"#F8FAFC":"#0B1220"}function H(t,s,r){const a=r.map(E=>E.toUpperCase()),n=a[0]??"#4C8CFF",i=a[1]??A(n,"#FFFFFF",.25),o=a.length>=5?a[4]:a[2]??"#0B1220",d=a.length>=4?a[3]:re(o)?A(o,"#FFFFFF",.06):A(o,"#000000",.04),u=a.length>=3?a[2]:B(o);a.length>=6?a[5]:re(o)?A(d,"#FFFFFF",.14):A(d,"#000000",.12);const g=a.length>=7?a[6]:"#EF4444",x=re(o)?"dark":"light";function m(E,k,I){return A(E,k==="dark"?"#0B1220":"#F8FAFC",Xe(I))}function b(E,k){let I=E;for(let v=0;v<6;v++){const N=J(I);if(k==="dark"?N>=.03&&N<=.1:N>=.86&&N<=.98)break;I=m(I,k,.16)}return I=m(I,k,.18),I}const C=b(o,x),P=b(d,x),h=x==="dark"?A(P,"#FFFFFF",.06):A(P,"#000000",.05),y=x==="dark"?A(h,"#FFFFFF",.1):A(h,"#000000",.1),p=B(C),w=B(h),_=w,T=B(n),F={"--background":S(C),"--foreground":S(p),"--card":S(h),"--card-foreground":S(w),"--popover":S(h),"--popover-foreground":S(_),"--primary":S(n),"--primary-foreground":S(T),"--secondary":S(i),"--secondary-foreground":S(B(i)),"--muted":S(x==="dark"?A(C,h,.55):A(C,h,.45)),"--muted-foreground":S(x==="dark"?A(p,"#94A3B8",.55):A(p,"#475569",.55)),"--accent":S(i),"--accent-foreground":S(B(i)),"--border":S(y),"--input":S(y),"--ring":S(n),"--success":S("#16A34A"),"--success-foreground":S("#FFFFFF"),"--warning":S("#F59E0B"),"--warning-foreground":S("#111827"),"--danger":S("#DC2626"),"--danger-foreground":S("#FFFFFF"),"--info":S("#2563EB"),"--info-foreground":S("#FFFFFF"),"--surface-2":S(x==="dark"?A(h,"#FFFFFF",.04):A(h,"#000000",.03)),"--surface-3":S(x==="dark"?A(h,"#FFFFFF",.08):A(h,"#000000",.06)),"--input-bg":S(x==="dark"?A(h,"#FFFFFF",.02):A(h,"#000000",.02)),"--input-border":S(y),"--destructive":S(g),"--destructive-foreground":S(B(g))},O=J(u),R=J(C),L=Math.abs(O-R),D=J(p),c=Math.abs(D-R);return L>c+.15&&(F["--foreground"]=S(u)),{id:t,name:s,mode:x,tokens:F}}function _e(t){return de.find(s=>s.id===t)}function gs(t){const s=document.documentElement;s.classList.toggle("dark",t.mode==="dark");for(const[r,a]of Object.entries(t.tokens))s.style.setProperty(r,a)}const de=[H("ceilings-light","Ceilings Unlimited — Light",["#7CC242","#1F2937","#111827","#F3F4F6","#FAFAFA","#E5E7EB","#DC2626"]),H("ceilings-dark","Ceilings Unlimited — Dark",["#7CC242","#94A3B8","#F1F5F9","#1E293B","#0F172A","#334155","#EF4444"]),H("future-grid","Future Grid",["#3B82F6","#06B6D4","#E2E8F0","#111827","#0B1220","#1F2937","#F43F5E"]),H("ivory-corporate","Ivory Corporate",["#2563EB","#64748B","#111827","#FFFFFF","#F8FAFC","#E2E8F0","#DC2626"]),H("graphite-pro","Graphite Pro",["#D4AF37","#94A3B8","#F8FAFC","#1C1F26","#121417","#2A2F38","#EF4444"])],me="lld-theme";function fs(t){return t==="ceilings-dark"||t==="graphite-pro"||t==="future-grid"}function ps(t){return t&&["ceilings-light","ceilings-dark","future-grid","ivory-corporate","graphite-pro"].includes(t)?t:null}function ke(t){const s=document.documentElement,r=de.find(a=>a.id===t);if(r){s.dataset.theme=t,r.mode==="dark"?s.classList.add("dark"):s.classList.remove("dark");for(const[a,n]of Object.entries(r.tokens))s.style.setProperty(a,n)}}function Ke(){const[t,s]=l.useState("ceilings-dark");l.useEffect(()=>{const o=ps(localStorage.getItem(me))??"ceilings-dark";s(o),ke(o),localStorage.setItem(me,o)},[]);const r=i=>{s(i),localStorage.setItem(me,i),ke(i)},a=()=>{r(t==="ceilings-dark"?"ceilings-light":"ceilings-dark")},n=l.useMemo(()=>fs(t),[t]);return{theme:t,setTheme:r,toggle:a,isDark:n}}function xs(){const{isDark:t,toggle:s}=Ke();return e.jsx("button",{type:"button",onClick:s,className:"p-2 rounded-lg border border-border hover:bg-card transition-colors","aria-label":"Toggle theme",title:"Toggle theme",children:t?e.jsx(ft,{className:"w-4 h-4 text-foreground"}):e.jsx(pt,{className:"w-4 h-4 text-foreground"})})}const fe={weekEndingDay:"Sunday",timesheetPeriod:1,companyName:"",companyLogo:"",lunchDefaultMinutes:30,roundingMinutes:15,features:{analytics:!0,weatherAlerts:!0,teamCollaboration:!0,approvalWorkflow:!1,customReports:!0,autoCarryForward:!0,aiSummary:!0,notifications:!0}},Ys=["Suspended Ceilings / 2-way","Rondo Ceilings","Partition Walls","Aluminium","Plasterboard / Linings","Stopping","Insulation","Carpentry","Fire Rating","Timber Partitions","Electrical","Plumbing","HVAC","Painting","Concrete","Roofing","Landscaping","General Labour","Other"],Zs=[{code:"101",label:"Suspended Ceilings / 2-way"},{code:"102",label:"Rondo Ceilings"},{code:"103",label:"Partition Walls"},{code:"104",label:"Aluminium"},{code:"105",label:"Plasterboard / Linings"},{code:"106",label:"Stopping"},{code:"107",label:"Insulation"},{code:"108",label:"Carpentry"},{code:"109",label:"Other"},{code:"110",label:"Carpet"},{code:"111",label:"FIRE RATING"},{code:"115",label:"Timber Partitions"},{code:"ACCOM",label:"Accommodation Allowance"},{code:"Other",label:"Other (please specify)"},{code:"P&G",label:"Preliminary and General"},{code:"P&Gs",label:"P&G Supervision"},{code:"P&Gt",label:"P&G Travel"},{code:"R/M",label:"Repairs and Maintenance"},{code:"Safety",label:"Safety Equipment"},{code:"Staff",label:"Staff Purchases on Company account"},{code:"Tools",label:"Tools"},{code:"training",label:"Staff Training"}],hs=["Clear","Partly Cloudy","Overcast","Light Rain","Heavy Rain","Wind","Storm","Snow","Fog","Hot","Cold"],Qs=[{value:"note",label:"General Note",color:"bg-primary"},{value:"reminder",label:"Reminder",color:"bg-purple-500"},{value:"meeting",label:"Meeting",color:"bg-indigo-500"},{value:"deadline",label:"Deadline",color:"bg-red-500"},{value:"inspection",label:"Inspection",color:"bg-primary"},{value:"delivery",label:"Delivery",color:"bg-green-500"}],Z=[{value:"site_manager",label:"Site Manager",description:"Full access to all features including settings, reports, and team management"},{value:"foreman",label:"Foreman",description:"Access to daily logs, timesheets, calendar, and basic reports"},{value:"safety_officer",label:"Safety Officer",description:"Access to daily logs, safety reports, and inspections"}],et={site_manager:["dashboard","daily-logs","calendar","timesheets","reports","settings"],foreman:["dashboard","daily-logs","calendar","timesheets","reports"],safety_officer:["dashboard","daily-logs","calendar","reports"]},bs="Long Line Diary",xe={appName:bs},Fe=[{key:"dashboard",label:"Dashboard",icon:xt},{key:"daily-logs",label:"Daily Logs",icon:ht},{key:"calendar",label:"Calendar",icon:bt},{key:"timesheets",label:"Timesheets",icon:We},{key:"reports",label:"Reports",icon:ze},{key:"settings",label:"Settings",icon:ge}],Pe=({currentPage:t,onNavigate:s,collapsed:r,onToggle:a,onQuickAdd:n,stats:i,userRole:o})=>{const d=o?et[o]:Fe.map(u=>u.key);return e.jsxs("aside",{className:`fixed left-0 top-0 h-full z-40 flex flex-col bg-card border-r border-border transition-all duration-300 ${r?"w-16":"w-60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 h-16 border-b border-border",children:[e.jsx("img",{src:"/LongLineDiaryV2/icons/ll-developer-logo.png",alt:"Long Line Developer",className:"w-16 h-16 object-contain flex-shrink-0"}),!r&&e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("h1",{className:"text-base font-bold text-foreground tracking-tight leading-none",children:xe.appName}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-0.5",children:"Construction Diary"})]})]}),n&&e.jsx("div",{className:"px-3 mt-4",children:e.jsxs("button",{onClick:n,className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg bg-primary hover:opacity-90 text-primary-foreground font-semibold text-sm transition ${r?"justify-center":""}`,children:[e.jsx(yt,{className:"w-4 h-4"}),!r&&e.jsx("span",{children:"New Job"})]})}),e.jsx("nav",{className:"flex-1 mt-4 px-2 space-y-1",children:Fe.map(({key:u,label:g,icon:x})=>{const m=t===u,b=u==="dashboard"&&i&&i.overdue>0,C=!d.includes(u);return e.jsxs("button",{onClick:()=>!C&&s(u),disabled:C,title:C?`${g} requires a higher role`:g,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all relative border ${C?"text-muted-foreground/50 cursor-not-allowed border-transparent opacity-60":m?"bg-primary/10 text-primary border-primary/20":"text-muted-foreground hover:text-foreground hover:bg-muted border-transparent"} ${r?"justify-center":""}`,children:[e.jsx(x,{className:"w-5 h-5 flex-shrink-0"}),!r&&e.jsx("span",{children:g}),C&&!r&&e.jsx(ee,{className:"w-3 h-3 ml-auto text-muted-foreground/60"}),b&&!C&&e.jsx("span",{className:`${r?"absolute -top-1 -right-1":"ml-auto"} bg-destructive text-destructive-foreground text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1`,children:i.overdue})]},u)})}),e.jsx("div",{className:"px-3 pb-4",children:e.jsx("button",{onClick:a,className:"w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-muted transition text-sm",children:r?e.jsx(jt,{className:"w-4 h-4"}):e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4"}),e.jsx("span",{children:"Collapse"})]})})})]})};function Xs(t){if(!t)return"low";const s=new Date;s.setHours(0,0,0,0);const r=Le(t),a=dt(r,s);return a<=3?"high":a<=7?"medium":"low"}function Ks(t){switch(t){case"high":return"bg-red-500/10 border-red-500/30 text-red-400";case"medium":return"bg-primary/10 border-primary/30 text-primary";case"low":return"bg-emerald-500/10 border-emerald-500/30 text-emerald-400"}}function er(t){switch(t){case"high":return"bg-red-500";case"medium":return"bg-primary";case"low":return"bg-emerald-500"}}function tr(t){if(!t)return"";try{return Ie(Le(t),"dd MMM yyyy")}catch{return t}}function Te(){return Ie(new Date,"yyyy-MM-dd")}function sr(t,s,r=0){if(!/^\d{2}:\d{2}$/.test(t)||!/^\d{2}:\d{2}$/.test(s))return 0;const[a,n]=t.split(":").map(Number),[i,o]=s.split(":").map(Number),d=a*60+n;let u=i*60+o;u<d&&(u+=24*60);const g=Math.max(0,u-d-r);return Math.round(g/15)*15/60}function ys(t,s){const r=new Date(t,s,1),a=new Date(t,s+1,0);return ct({start:r,end:a})}function rr(t,s){const r=ys(t,s),a=r[0].getDay(),n=[];let i=[];for(let o=0;o<a;o++)i.push(null);for(const o of r)i.push(o),i.length===7&&(n.push(i),i=[]);if(i.length>0){for(;i.length<7;)i.push(null);n.push(i)}return n}async function he(){const{data:{user:t}}=await f.auth.getUser();return(t==null?void 0:t.id)??null}async function $(t){const s=await he();return s?{...t,user_id:s}:t}async function js(){const{data:t,error:s}=await f.from("projects").select("*").order("created_at",{ascending:!1});if(s)throw s;return t||[]}async function vs(t){const s=await $(t),{data:r,error:a}=await f.from("projects").insert(s).select().single();if(a)throw a;return r}async function ar(t){let s=f.from("daily_logs").select("*, projects(*)").order("log_date",{ascending:!1});t!=null&&t.date&&(s=s.eq("log_date",t.date)),t!=null&&t.project_id&&(s=s.eq("project_id",t.project_id));const{data:r,error:a}=await s;if(a)throw a;return(r||[]).map(n=>({...n,project:n.projects}))}async function or(t){const[s,r,a,n,i,o]=await Promise.all([f.from("daily_logs").select("*, projects(*)").eq("id",t).single(),f.from("crew_attendance").select("*").eq("daily_log_id",t).order("created_at"),f.from("work_activities").select("*").eq("daily_log_id",t).order("created_at"),f.from("materials").select("*").eq("daily_log_id",t).order("created_at"),f.from("equipment_logs").select("*").eq("daily_log_id",t).order("created_at"),f.from("visitors").select("*").eq("daily_log_id",t).order("created_at")]);if(s.error)throw s.error;const d=s.data;return{...d,project:d.projects,crew:r.data||[],activities:a.data||[],materials:n.data||[],equipment:i.data||[],visitors:o.data||[]}}async function ws(t){const{project:s,crew:r,activities:a,materials:n,equipment:i,visitors:o,...d}=t,u=await $(d),{data:g,error:x}=await f.from("daily_logs").insert(u).select("*, projects(*)").single();if(x)throw x;return{...g,project:g.projects}}async function nr(t,s){const{project:r,crew:a,activities:n,materials:i,equipment:o,visitors:d,...u}=s,{data:g,error:x}=await f.from("daily_logs").update(u).eq("id",t).select("*, projects(*)").single();if(x)throw x;return{...g,project:g.projects}}async function ir(t){const{error:s}=await f.from("daily_logs").delete().eq("id",t);if(s)throw s}async function lr(t){const s=await $(t),{data:r,error:a}=await f.from("crew_attendance").insert(s).select().single();if(a)throw a;return r}async function dr(t,s){const{data:r,error:a}=await f.from("crew_attendance").update(s).eq("id",t).select().single();if(a)throw a;return r}async function cr(t){const{error:s}=await f.from("crew_attendance").delete().eq("id",t);if(s)throw s}async function ur(t){const s=await $(t),{data:r,error:a}=await f.from("work_activities").insert(s).select().single();if(a)throw a;return r}async function mr(t,s){const{data:r,error:a}=await f.from("work_activities").update(s).eq("id",t).select().single();if(a)throw a;return r}async function gr(t){const{error:s}=await f.from("work_activities").delete().eq("id",t);if(s)throw s}async function fr(t){const s=await $(t),{data:r,error:a}=await f.from("materials").insert(s).select().single();if(a)throw a;return r}async function pr(t,s){const{data:r,error:a}=await f.from("materials").update(s).eq("id",t).select().single();if(a)throw a;return r}async function xr(t){const{error:s}=await f.from("materials").delete().eq("id",t);if(s)throw s}async function hr(t){const s=await $(t),{data:r,error:a}=await f.from("equipment_logs").insert(s).select().single();if(a)throw a;return r}async function br(t,s){const{data:r,error:a}=await f.from("equipment_logs").update(s).eq("id",t).select().single();if(a)throw a;return r}async function yr(t){const{error:s}=await f.from("equipment_logs").delete().eq("id",t);if(s)throw s}async function jr(t){const s=await $(t),{data:r,error:a}=await f.from("visitors").insert(s).select().single();if(a)throw a;return r}async function vr(t,s){const{data:r,error:a}=await f.from("visitors").update(s).eq("id",t).select().single();if(a)throw a;return r}async function wr(t){const{error:s}=await f.from("visitors").delete().eq("id",t);if(s)throw s}async function Nr(t,s){let r=f.from("calendar_notes").select("*").order("note_date");if(t!==void 0&&s!==void 0){const i=`${s}-${String(t+1).padStart(2,"0")}-01`,o=t===11?0:t+1,u=`${t===11?s+1:s}-${String(o+1).padStart(2,"0")}-01`;r=r.gte("note_date",i).lt("note_date",u)}const{data:a,error:n}=await r;if(n)throw n;return a||[]}async function Cr(t){const s=await $(t),{data:r,error:a}=await f.from("calendar_notes").insert(s).select().single();if(a)throw a;return r}async function Sr(t,s){const{data:r,error:a}=await f.from("calendar_notes").update(s).eq("id",t).select().single();if(a)throw a;return r}async function _r(t){const{error:s}=await f.from("calendar_notes").delete().eq("id",t);if(s)throw s}async function Ns(){const t=await he();let s=f.from("app_settings").select("*").eq("setting_key","main");t&&(s=s.eq("user_id",t));const{data:r}=await s;return r&&r.length>0&&r[0].setting_value?{...fe,...r[0].setting_value}:fe}async function Cs(t){const s=await he(),r={setting_key:"main",setting_value:t,updated_at:new Date().toISOString()};s&&(r.user_id=s);const{error:a}=await f.from("app_settings").upsert(r,{onConflict:"setting_key"});if(a)throw a}async function kr(){const[t,s,r,a]=await Promise.all([f.from("work_activities").select("*, daily_logs(*, projects(*))").eq("is_completed",!1).order("due_date"),f.from("materials").select("*, daily_logs(*, projects(*))").eq("is_completed",!1).order("required_date"),f.from("equipment_logs").select("*, daily_logs(*, projects(*))").eq("is_completed",!1).order("due_date"),f.from("crew_attendance").select("*, daily_logs(*, projects(*))").eq("is_completed",!1).order("due_date")]);return{activities:t.data||[],materials:s.data||[],equipment:r.data||[],crew:a.data||[]}}async function Ss(){const[t,s,r,a]=await Promise.all([f.from("projects").select("id, status").eq("status","active"),f.from("daily_logs").select("id, priority, safety_incidents, is_completed"),f.from("work_activities").select("id, is_completed, due_date"),f.from("materials").select("id, is_completed, required_date, status")]),n=(t.data||[]).length,i=(s.data||[]).length,o=(s.data||[]).filter(b=>b.priority==="high").length,d=(s.data||[]).filter(b=>b.safety_incidents&&b.safety_incidents.trim()).length,u=new Date().toISOString().split("T")[0],g=(r.data||[]).filter(b=>!b.is_completed&&b.due_date&&b.due_date<u).length,x=(a.data||[]).filter(b=>!b.is_completed&&b.required_date&&b.required_date<u).length,m=(a.data||[]).filter(b=>b.status==="pending").length;return{activeProjects:n,totalLogs:i,highPriorityLogs:o,safetyIncidents:d,overdueActivities:g,overdueMaterials:x,pendingMaterials:m,totalOverdue:g+x}}const _s=({open:t,onClose:s,onCreated:r})=>{const[a,n]=l.useState([]),[i,o]=l.useState("new"),[d,u]=l.useState(""),[g,x]=l.useState(!1),[m,b]=l.useState(""),[C,P]=l.useState(""),[h,y]=l.useState(""),[p,w]=l.useState(""),[_,T]=l.useState(Te()),[F,O]=l.useState(""),[R,L]=l.useState(""),[D,c]=l.useState(""),[E,k]=l.useState(""),[I,v]=l.useState("low"),[N,q]=l.useState("");l.useEffect(()=>{t&&js().then(n).catch(console.error)},[t]);const Q=async j=>{j.preventDefault(),x(!0);try{let X=d;i==="new"&&(X=(await vs({name:m,job_number:C,location:h,client:p,status:"active"})).id);const at=await ws({project_id:X,log_date:_,weather:F,temperature:R,wind:D,site_conditions:E,priority:I,notes:N,safety_incidents:"",critical_items:"",is_completed:!1});r(at.id),rt()}catch(X){console.error(X),alert("Failed to create job")}x(!1)},rt=()=>{b(""),P(""),y(""),w(""),T(Te()),O(""),L(""),c(""),k(""),v("low"),q(""),u(""),o("new")};return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:s,children:e.jsxs("div",{className:"bg-card border border-border rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"New Job Entry"}),e.jsx("button",{onClick:s,className:"p-1 rounded-lg hover:bg-surface-3/60 text-muted-foreground hover:text-foreground",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:Q,className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>o("new"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${i==="new"?"bg-primary text-primary-foreground":"bg-surface-2 text-foreground/80 hover:bg-surface-3/60"}`,children:"New Project"}),e.jsx("button",{type:"button",onClick:()=>o("existing"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${i==="existing"?"bg-primary text-primary-foreground":"bg-surface-2 text-foreground/80 hover:bg-surface-3/60"}`,children:"Existing Project"})]}),i==="existing"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Select Project"}),e.jsxs("select",{value:d,onChange:j=>u(j.target.value),required:!0,className:"lld-input w-full px-3 py-2 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Choose a project..."}),a.map(j=>e.jsxs("option",{value:j.id,children:[j.job_number?`[${j.job_number}] `:"",j.name]},j.id))]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Project Name *"}),e.jsx("input",{value:m,onChange:j=>b(j.target.value),required:!0,className:"lld-input w-full px-3 py-2 rounded-lg text-sm",placeholder:"e.g. Smith St Fitout"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Job Number"}),e.jsx("input",{value:C,onChange:j=>P(j.target.value),className:"lld-input w-full px-3 py-2 rounded-lg text-sm",placeholder:"e.g. 1234"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Location"}),e.jsx("input",{value:h,onChange:j=>y(j.target.value),className:"lld-input w-full px-3 py-2 rounded-lg text-sm",placeholder:"e.g. Auckland CBD"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Client"}),e.jsx("input",{value:p,onChange:j=>w(j.target.value),className:"lld-input w-full px-3 py-2 rounded-lg text-sm",placeholder:"e.g. ABC Corp"})]})]})]}),e.jsx("hr",{className:"border-border"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Date *"}),e.jsx("input",{type:"date",value:_,onChange:j=>T(j.target.value),required:!0,className:"lld-input w-full px-3 py-2 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Priority"}),e.jsxs("select",{value:I,onChange:j=>v(j.target.value),className:"lld-input w-full px-3 py-2 rounded-lg text-sm",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Weather"}),e.jsxs("select",{value:F,onChange:j=>O(j.target.value),className:"lld-input w-full px-3 py-2 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Select..."}),hs.map(j=>e.jsx("option",{value:j,children:j},j))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Temperature"}),e.jsx("input",{value:R,onChange:j=>L(j.target.value),className:"lld-input w-full px-3 py-2 rounded-lg text-sm",placeholder:"e.g. 18Â°C"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Wind"}),e.jsx("input",{value:D,onChange:j=>c(j.target.value),className:"lld-input w-full px-3 py-2 rounded-lg text-sm",placeholder:"e.g. Light NW"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Site Conditions"}),e.jsx("input",{value:E,onChange:j=>k(j.target.value),className:"lld-input w-full px-3 py-2 rounded-lg text-sm",placeholder:"e.g. Dry, good access"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Notes"}),e.jsx("textarea",{value:N,onChange:j=>q(j.target.value),rows:2,className:"lld-input w-full px-3 py-2 rounded-lg text-sm resize-none",placeholder:"Any additional notes..."})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 py-2.5 rounded-lg bg-surface-2 text-foreground/80 hover:bg-surface-3/60 text-sm font-medium transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"flex-1 py-2.5 rounded-lg bg-primary hover:bg-primary/90 text-primary-foreground text-sm font-bold transition-colors disabled:opacity-50",children:g?"Creating...":"Create Job"})]})]})]})}):null},z="lld-input w-full pl-10 pr-4 py-3 rounded-xl text-sm transition-all",Ee=({open:t,onClose:s})=>{var I;const{signIn:r,signUp:a}=pe(),[n,i]=l.useState("signin"),[o,d]=l.useState(""),[u,g]=l.useState(""),[x,m]=l.useState(""),[b,C]=l.useState(""),[P,h]=l.useState("foreman"),[y,p]=l.useState(!1),[w,_]=l.useState(!1),[T,F]=l.useState(null),[O,R]=l.useState(null),L=()=>{d(""),g(""),m(""),C(""),h("foreman"),F(null),R(null)};l.useEffect(()=>{t&&(i("signin"),p(!1),L())},[t]),l.useEffect(()=>{t?(i("signin"),p(!1),_(!1),L(),s()):(p(!1),_(!1),F(null),R(null))},[t]),l.useEffect(()=>{t&&(i("signin"),L(),p(!1),_(!1))},[t]);const D=v=>{i(v),L(),s()},c=async v=>{if(v.preventDefault(),F(null),!o||!u){F("Please fill in all fields");return}_(!0);const{error:N}=await r(o,u);if(_(!1),N){F(N);return}s(),L(),s()},E=async v=>{if(v.preventDefault(),F(null),!o||!u||!b){F("Please fill in all fields");return}if(u.length<6){F("Password must be at least 6 characters");return}if(u!==x){F("Passwords do not match");return}_(!0);const{error:N}=await a(o,u,b,P);if(_(!1),N){F(N);return}R("Account created! You can now sign in."),setTimeout(()=>{D("signin")},1500)};if(!t)return null;const k={site_manager:le,foreman:ae,safety_officer:oe};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"relative w-full max-w-md bg-card border border-border/50 rounded-2xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"relative bg-surface-2/60 px-6 pt-6 pb-4",children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-surface-2 text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(ie,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary flex items-center justify-center shadow-lg shadow-primary/15",children:e.jsx(ae,{className:"w-5 h-5 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:xe.appName}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Construction Management Platform"})]})]}),e.jsxs("div",{className:"flex bg-surface-2 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>D("signin"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all ${n==="signin"?"bg-primary text-primary-foreground shadow-lg shadow-primary/15":"text-muted-foreground hover:text-foreground"}`,children:"Sign In"}),e.jsx("button",{onClick:()=>D("signup"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all ${n==="signup"?"bg-primary text-primary-foreground shadow-lg shadow-primary/15":"text-muted-foreground hover:text-foreground"}`,children:"Create Account"})]})]}),e.jsxs("div",{className:"px-6 pb-6 pt-2",children:[T&&e.jsxs("div",{className:"flex items-center gap-2 p-3 mb-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:[e.jsx(oe,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:T})]}),O&&e.jsxs("div",{className:"flex items-center gap-2 p-3 mb-4 rounded-xl bg-green-500/10 border border-green-500/20 text-green-400 text-sm",children:[e.jsx(wt,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:O})]}),n==="signin"?e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"email",placeholder:"Email address",value:o,onChange:v=>d(v.target.value),className:z,autoComplete:"email"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:y?"text":"password",placeholder:"Password",value:u,onChange:v=>g(v.target.value),className:`${z} pr-10`,autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>p(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:y?e.jsx(ye,{className:"w-4 h-4"}):e.jsx(je,{className:"w-4 h-4"})})]}),e.jsxs("button",{type:"submit",disabled:w,className:"w-full py-3 rounded-xl bg-primary text-primary-foreground font-semibold text-sm transition-all shadow-lg shadow-primary/15 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[w?e.jsx(ve,{className:"w-4 h-4 animate-spin"}):null,w?"Signing in...":"Sign In"]})]}):e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Full name",value:b,onChange:v=>C(v.target.value),className:z,autoComplete:"name"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"email",placeholder:"Email address",value:o,onChange:v=>d(v.target.value),className:z,autoComplete:"email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Your Role"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Z.map(v=>{const N=k[v.value],q=P===v.value;return e.jsxs("button",{type:"button",onClick:()=>h(v.value),className:`flex flex-col items-center gap-1.5 p-3 rounded-xl border transition-all text-center ${q?"bg-primary/10 border-primary/40 text-primary":"bg-surface-2/70 border-border/50 text-muted-foreground hover:border-border"}`,children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-medium leading-tight",children:v.label})]},v.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground/80 mt-1.5",children:(I=Z.find(v=>v.value===P))==null?void 0:I.description})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:y?"text":"password",placeholder:"Password (min 6 characters)",value:u,onChange:v=>g(v.target.value),className:`${z} pr-10`,autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>p(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:y?e.jsx(ye,{className:"w-4 h-4"}):e.jsx(je,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:y?"text":"password",placeholder:"Confirm password",value:x,onChange:v=>m(v.target.value),className:z,autoComplete:"new-password"})]}),e.jsxs("button",{type:"submit",disabled:w,className:"w-full py-3 rounded-xl bg-primary text-primary-foreground font-semibold text-sm transition-all shadow-lg shadow-primary/15 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[w?e.jsx(ve,{className:"w-4 h-4 animate-spin"}):null,w?"Creating account...":"Create Account"]})]}),e.jsx("p",{className:"text-center text-xs text-muted-foreground/80 mt-4",children:n==="signin"?e.jsxs(e.Fragment,{children:["Don't have an account?"," ",e.jsx("button",{onClick:()=>D("signup"),className:"text-primary hover:text-primary/90 font-medium",children:"Create one"})]}):e.jsxs(e.Fragment,{children:["Already have an account?"," ",e.jsx("button",{onClick:()=>D("signin"),className:"text-primary hover:text-primary/90 font-medium",children:"Sign in"})]})})]})]})]})},Ae=l.lazy(()=>U(()=>import("./DashboardPage-K6KCfXUp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),ks=l.lazy(()=>U(()=>import("./DailyLogsPage-Bn7TJhCI.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]))),Fs=l.lazy(()=>U(()=>import("./CalendarPage-Mjc3PNYl.js"),__vite__mapDeps([9,1,2,3,4,5,6,7]))),Ps=l.lazy(()=>U(()=>import("./TimesheetPage-CdhXq0p2.js"),__vite__mapDeps([10,1,3,4,5,6,7]))),Ts=l.lazy(()=>U(()=>import("./ReportsPage-D9DKT_-j.js"),__vite__mapDeps([11,1,2,3,4,5,6,7]))),Es=l.lazy(()=>U(()=>Promise.resolve().then(()=>Ls),void 0)),As={site_manager:le,foreman:ae,safety_officer:oe},Ds=()=>{var I,v;const{user:t,profile:s,loading:r,signOut:a}=pe(),[n,i]=l.useState("dashboard"),[o,d]=l.useState(!1),[u,g]=l.useState(!1),[x,m]=l.useState(!1),[b,C]=l.useState(!1),[P,h]=l.useState(!1),[y,p]=l.useState(null),[w,_]=l.useState(0),T=(s==null?void 0:s.role)||null;if(r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center text-muted-foreground",children:"Loading..."});if(!t)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-6 bg-background",children:[e.jsx("div",{className:"text-2xl font-semibold",children:"Long Line Diary"}),e.jsx("button",{onClick:()=>C(!0),className:"px-6 py-3 rounded-lg bg-primary text-primary-foreground font-semibold",children:"Sign In"}),e.jsx(Ee,{open:b,onClose:()=>C(!1)})]});l.useEffect(()=>{Ss().then(N=>_(N.totalOverdue)).catch(()=>{})},[n]),l.useEffect(()=>{if(!P)return;const N=q=>h(!1);return document.addEventListener("click",N),()=>document.removeEventListener("click",N)},[P]);const F=l.useCallback((N,q)=>{const Q=N;T&&!et[T].includes(Q)||(i(Q),p(q||null),g(!1))},[T]),O=l.useCallback(N=>{m(!1),i("daily-logs"),p({logId:N})},[]),R=async()=>{await a(),h(!1),i("dashboard")},L=()=>{switch(n){case"dashboard":return e.jsx(Ae,{onNavigate:F,onQuickAdd:()=>m(!0)});case"daily-logs":return e.jsx(ks,{initialData:y});case"calendar":return e.jsx(Fs,{onNavigate:F,initialData:y});case"timesheets":return e.jsx(Ps,{});case"reports":return e.jsx(Ts,{onNavigate:F});case"settings":return e.jsx(Es,{userRole:T});default:return e.jsx(Ae,{onNavigate:F,onQuickAdd:()=>m(!0)})}},D=(s==null?void 0:s.full_name)||((I=t==null?void 0:t.email)==null?void 0:I.split("@")[0])||"",c=(t==null?void 0:t.email)||"",E=T?As[T]:V,k=T&&((v=Z.find(N=>N.value===T))==null?void 0:v.label)||"";return e.jsxs("div",{className:"min-h-screen bg-background",children:[u&&e.jsx("div",{className:"fixed inset-0 z-30 bg-black/50 lg:hidden",onClick:()=>g(!1)}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Pe,{currentPage:n,onNavigate:N=>{F(N)},collapsed:o,onToggle:()=>d(!o),onQuickAdd:()=>m(!0),stats:{overdue:w,highPriority:0},userRole:T})}),e.jsx("div",{className:`lg:hidden fixed inset-y-0 left-0 z-40 transition-transform duration-300 ${u?"translate-x-0":"-translate-x-full"}`,children:e.jsx(Pe,{currentPage:n,onNavigate:N=>{F(N)},collapsed:o,onToggle:()=>d(!o),onQuickAdd:()=>{m(!0),g(!1)},stats:{overdue:w,highPriority:0},userRole:T})}),e.jsxs("main",{className:`transition-all duration-300 min-h-screen ${o?"ml-16":"ml-60"}`,children:[e.jsx("header",{className:"sticky top-0 z-20 bg-background/80 backdrop-blur-xl border-b border-border/50 px-4 lg:px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xs,{}),e.jsx("button",{onClick:()=>g(!u),className:"lg:hidden p-2 rounded-lg hover:bg-card text-muted-foreground",children:u?e.jsx(ie,{className:"w-5 h-5"}):e.jsx(Nt,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-sm font-semibold text-muted-foreground capitalize",children:n.replace("-"," ")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-muted-foreground hidden sm:inline",children:new Date().toLocaleDateString("en-NZ",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),r?e.jsx("div",{className:"w-8 h-8 rounded-full bg-card animate-pulse"}):t?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:N=>{N.stopPropagation(),h(!P)},className:"flex items-center gap-2 pl-2 pr-3 py-1.5 rounded-xl bg-card/80 border border-border/50 hover:border-border transition-all",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-primary flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-foreground",children:D.charAt(0).toUpperCase()||"U"})}),e.jsxs("div",{className:"hidden sm:block text-left",children:[e.jsx("p",{className:"text-xs font-medium text-white leading-none",children:D}),e.jsx("p",{className:"text-[10px] text-muted-foreground leading-none mt-0.5",children:k})]}),e.jsx(Ct,{className:"w-3 h-3 text-muted-foreground"})]}),P&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-card border border-border/50 rounded-xl shadow-2xl overflow-hidden",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"px-4 py-3 border-b border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-foreground",children:D.charAt(0).toUpperCase()||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:D}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:c})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-2 px-2 py-1 rounded-lg bg-card/50 w-fit",children:[e.jsx(E,{className:"w-3 h-3 text-primary"}),e.jsx("span",{className:"text-[10px] font-medium text-primary",children:k})]})]}),e.jsxs("div",{className:"p-1.5",children:[e.jsxs("button",{onClick:()=>{h(!1),F("settings")},className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-muted-foreground hover:bg-card/50 hover:text-white transition-colors",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:"Profile & Settings"})]}),e.jsxs("button",{onClick:R,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-red-400 hover:bg-red-500/10 transition-colors",children:[e.jsx(St,{className:"w-4 h-4"}),e.jsx("span",{children:"Sign Out"})]})]})]})]}):e.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-primary hover:bg-primary/90 text-foreground font-semibold text-xs transition-all shadow-lg shadow-primary/20",children:[e.jsx(_t,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Sign In"})]})]})]})}),e.jsx("div",{className:"p-4 lg:p-6",children:e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"p-6 text-muted-foreground text-sm",children:"Loading…"}),children:L()})})]}),e.jsx(_s,{open:x,onClose:()=>m(!1),onCreated:O}),e.jsx(Ee,{open:b,onClose:()=>C(!1)})]})},Is=()=>{const t=Ot();return l.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center p-8 rounded-lg border border-border bg-card shadow-md animate-slide-in",children:[e.jsx("h1",{className:"text-5xl font-bold mb-6 text-primary",children:"404"}),e.jsx("p",{className:"text-xl text-card-foreground mb-6",children:"Page not found"}),e.jsx("a",{href:"/",className:"text-primary hover:text-primary/80 underline transition-colors",children:"Return to Home"})]})})},G="lld-input w-full px-3 py-2 rounded-lg text-sm",M="block text-xs font-medium text-muted-foreground mb-1",De={site_manager:le,foreman:ae,safety_officer:oe},tt=({userRole:t})=>{const{user:s,profile:r,updateProfile:a}=pe(),{theme:n,setTheme:i}=Ke(),[o,d]=l.useState(fe),[u,g]=l.useState(!1),[x,m]=l.useState(!1),[b,C]=l.useState(!0),[P,h]=l.useState(""),[y,p]=l.useState("foreman"),[w,_]=l.useState(!1),[T,F]=l.useState(!1);l.useEffect(()=>{Ns().then(c=>{d(c),C(!1)}).catch(()=>C(!1))},[]),l.useEffect(()=>{r&&(h(r.full_name),p(r.role))},[r]);const O=async()=>{g(!0);try{await Cs(o),m(!0),setTimeout(()=>m(!1),2e3)}catch(c){console.error(c),alert("Failed to save settings")}g(!1)},R=async()=>{_(!0);try{await a({full_name:P,role:y}),F(!0),setTimeout(()=>F(!1),2e3)}catch(c){console.error(c)}_(!1)},L=(c,E)=>{d(k=>({...k,features:{...k.features,[c]:E}}))},D=[{key:"analytics",label:"Analytics & Insights",description:"Track crew productivity, project health, and trends",icon:ze},{key:"weatherAlerts",label:"Weather Alerts",description:"Get weather forecasts and site impact warnings",icon:Ft},{key:"teamCollaboration",label:"Team Collaboration",description:"Comments, mentions, and team notes on logs",icon:Pt},{key:"approvalWorkflow",label:"Approval Workflow",description:"Require manager sign-off on daily logs",icon:Tt},{key:"customReports",label:"Custom Reports",description:"Build custom report templates and formats",icon:Et},{key:"autoCarryForward",label:"Auto Carry Forward",description:"Automatically move incomplete items to next day",icon:At},{key:"aiSummary",label:"AI Daily Summary",description:"Get AI-powered morning briefings across all jobs",icon:Dt},{key:"notifications",label:"Smart Notifications",description:"Automated alerts for overdue items and reminders",icon:It}];return b?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6 max-w-3xl",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Settings"}),e.jsxs("p",{className:"text-muted-foreground text-sm mt-1",children:["Configure your ",xe.appName," preferences"]})]}),e.jsx("button",{onClick:O,disabled:u,className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-semibold transition-colors ${x?"bg-emerald-500 text-foreground":"bg-primary hover:bg-primary/90 text-primary-foreground"} disabled:opacity-50`,children:x?e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-4 h-4"})," Saved"]}):u?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4"})," Save Settings"]})})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ge,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-sm font-bold text-foreground",children:"Theme"}),e.jsx("span",{className:"text-[10px] text-muted-foreground ml-2",children:"Applies instantly (saved on this device)"})]}),e.jsx("label",{className:M,children:"Theme palette"}),e.jsx("select",{className:G,value:n,onChange:c=>i(c.target.value),children:de.map(c=>e.jsxs("option",{value:c.id,children:[c.name," (",c.mode,")"]},c.id))}),e.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"Note: Only colours/tokens. Does not change your logo."})]}),s&&e.jsxs("div",{className:"bg-card border border-border rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(V,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-sm font-bold text-foreground",children:"Your Profile"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:M,children:"Full Name"}),e.jsx("input",{value:P,onChange:c=>h(c.target.value),className:G,placeholder:"Your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:M,children:"Email"}),e.jsx("input",{value:s.email||"",disabled:!0,className:`${G} opacity-60 cursor-not-allowed`})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:M,children:"Your Role"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:Z.map(c=>{const E=De[c.value]||V,k=y===c.value;return e.jsxs("button",{type:"button",onClick:()=>p(c.value),className:`flex items-center gap-3 p-3 rounded-xl border transition-all text-left ${k?"bg-primary/10 border-primary/50":"bg-muted border-border hover:border-border"}`,children:[e.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center ${k?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,children:e.jsx(E,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${k?"text-primary":"text-muted-foreground"}`,children:c.label}),e.jsx("p",{className:"text-[10px] text-muted-foreground leading-tight",children:c.description.split(",")[0]})]})]},c.value)})})]}),e.jsx("button",{onClick:R,disabled:w,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-semibold transition-colors ${T?"bg-emerald-500 text-foreground":"bg-primary hover:bg-primary/90 text-primary-foreground"} disabled:opacity-50`,children:T?e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-3 h-3"})," Profile Saved"]}):w?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-3 h-3"})," Update Profile"]})})]}),!s&&e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(le,{className:"w-5 h-5 text-primary flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Sign in to manage your profile"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Create an account to save your settings and access role-based features."})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(kt,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-sm font-bold text-foreground",children:"Company Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:M,children:"Company Name"}),e.jsx("input",{value:o.companyName,onChange:c=>d({...o,companyName:c.target.value}),className:G,placeholder:"e.g. Long Line Builders"})]}),e.jsxs("div",{children:[e.jsx("label",{className:M,children:"Company Logo URL"}),e.jsx("input",{value:o.companyLogo,onChange:c=>d({...o,companyLogo:c.target.value}),className:G,placeholder:"https://example.com/logo.png"}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Used on PDF/Excel exports"})]})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(We,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-sm font-bold text-foreground",children:"Timesheet Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:M,children:"Timesheet Period"}),e.jsx("div",{className:"flex gap-2",children:[1,2].map(c=>e.jsxs("button",{onClick:()=>d({...o,timesheetPeriod:c}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${o.timesheetPeriod===c?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted"}`,children:[c," Week",c>1?"s":""]},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:M,children:"Week Ending Day"}),e.jsx("select",{value:o.weekEndingDay,onChange:c=>d({...o,weekEndingDay:c.target.value}),className:G,children:["Sunday","Saturday","Friday","Thursday","Wednesday","Tuesday","Monday"].map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:M,children:"Default Lunch"}),e.jsx("div",{className:"flex gap-2",children:[30,60].map(c=>e.jsxs("button",{onClick:()=>d({...o,lunchDefaultMinutes:c}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${o.lunchDefaultMinutes===c?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted"}`,children:[c," min"]},c))})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:M,children:"Rounding (minutes)"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[5,10,15,30].map(c=>e.jsxs("button",{onClick:()=>d({...o,roundingMinutes:c}),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o.roundingMinutes===c?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted"}`,children:[c," min"]},c))})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ge,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-sm font-bold text-foreground",children:"Features"}),e.jsx("span",{className:"text-[10px] text-muted-foreground ml-2",children:"Toggle features on/off"})]}),e.jsx("div",{className:"space-y-3",children:D.map(c=>{const E=c.icon,k=o.features[c.key];return e.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-xl border transition-colors ${k?"bg-muted border-border":"bg-card border-border opacity-60"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${k?"bg-primary/15 text-primary":"bg-muted text-muted-foreground"}`,children:e.jsx(E,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:c.label}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.description})]}),e.jsx("button",{onClick:()=>L(c.key,!k),className:`relative w-11 h-6 rounded-full transition-colors ${k?"bg-primary":"bg-muted"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-foreground transition-transform ${k?"translate-x-5":"translate-x-0"}`})})]},c.key)})})]}),e.jsxs("div",{className:"bg-card border border-border rounded-xl p-5",children:[e.jsx("h2",{className:"text-sm font-bold text-foreground mb-3",children:"Role Access Levels"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Each role has different access to features:"}),e.jsx("div",{className:"space-y-2",children:Z.map(c=>{const E=De[c.value]||V,k=t===c.value;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-colors ${k?"bg-primary/10 border-primary/20":"bg-muted/20 border-border"}`,children:[e.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center ${k?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,children:e.jsx(E,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-semibold ${k?"text-primary":"text-foreground"}`,children:c.label}),k&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-primary/20 text-primary font-medium",children:"Current"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.description})]})]},c.value)})})]})]})},Ls=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"})),Rs=new Lt,Os=()=>e.jsx(ts,{defaultTheme:"light",children:e.jsx(Rt,{client:Rs,children:e.jsxs(as,{children:[e.jsx(es,{}),e.jsx(rs,{}),e.jsx(ls,{children:e.jsx(us,{children:e.jsx(Mt,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsxs(qt,{children:[e.jsx(K,{path:"/",element:e.jsx($t,{to:"/dashboard",replace:!0})}),e.jsx(K,{path:"/*",element:e.jsx(Ds,{})}),e.jsx(K,{path:"*",element:e.jsx(Is,{})}),e.jsx(K,{path:"/settings",element:e.jsx(tt,{})})]})})})})]})})}),st="lld.themeId";function Ms(){try{return localStorage.getItem(st)}catch{return null}}function qs(t){try{localStorage.setItem(st,t)}catch{}}function $s(){return de[0]}function Bs(){const t=Ms(),s=t&&_e(t)?_e(t):$s();return gs(s),t||qs(s.id),s}Bs();zt({immediate:!0});ut(document.getElementById("root")).render(e.jsx(Os,{}));export{hr as A,jr as B,Nr as C,Sr as D,_r as E,Cr as F,Ns as G,Zs as H,Ks as I,Qs as N,Ys as T,hs as W,ar as a,Ss as b,kr as c,Xs as d,tr as e,js as f,er as g,or as h,rr as i,ir as j,dr as k,cr as l,mr as m,gr as n,pr as o,xr as p,br as q,yr as r,vr as s,Te as t,nr as u,wr as v,sr as w,lr as x,ur as y,fr as z};
